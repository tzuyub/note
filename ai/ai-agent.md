---
title: AI Agent 介绍文档
---


::: tip 文档说明
本文主要基于 AI Agent 中「模型反射型」的Agent进行探讨，默认阅读本文的读者已经对LLM有基础了解，在文章中不过多赘述LLM的基础信息。
:::

# AI Agent 介绍文档

## 术语以及名词说明

- RPA: 机器人流程自动化 (RPA) 也称为软件机器人，RPA 使用智能自动化技术执行人类工作人员的重复性办公任务，例如提取数据、填写表格、移动文件等。 
- AI assistants:  AI 虚拟助理，是由人工智能 （AI） 提供支持的软件，可以以文本或语音格式以类似人类的语言响应查询。它利用自然语言处理 （NLP） 以对话方式处理、理解和生成对系统用户的响应。
- LLM: 一种大型语言模型（Large Language Model），是一种基于人工智能的算法，能够理解和生成人类语言。
- MCP: MCP 是一种开放协议，它标准化了应用程序如何为 LLM 提供上下文。将 MCP 想象成 AI 应用程序的 USB-C 端口。正如 USB-C 提供了一种将设备连接到各种外围设备和配件的标准化方式一样，MCP 也提供了一种将 AI 模型连接到不同数据源和工具的标准化方式。

## 什么是AI Agent(智能体)

### 由来

Agent 是古老术语，哲学中指有行动能力的实体，在拥有高性能 LLM 之前很久就已经存在了，随着 LLM 能力的飞速发展，Agent 逐渐成为人工智能核心概念。
从根本上讲，今天的 AI 代理是一个半自主或完全自主的系统，它使用 LLM 作为其“大脑”来做出关键决策和解决复杂任务。

### 定义

Agent: 是任何可以被视为通过传感器感知环境，并通过执行器作用于该环境的实体。

AI Agent: 是一种能够**感知环境**、**进行决策**和**执行动作**的智能实体。

![多Agent基础交互图.svg](assets/%E5%A4%9AAgent%E5%9F%BA%E7%A1%80%E4%BA%A4%E4%BA%92%E5%9B%BE.svg)

AI Agent更像是利用LLM这颗大脑，通过感知、决策、行动、记忆、学习等多个器官来自动化处理复杂任务，相对于RPA而言，具备独立思考能力和学习能力使得 AI Agent 能够**处理未知环境问题**。


::: details AI Agent VS AI assistants
AI assistants：AI assistants 是由基础模型(foundation models)构建，多用于提供信息建议和帮助，在智能客服这方面十分有优势。

AI assistants 和 AI Agents 的区别是AI assistants往往需要用户输入明确并且定义好的指令才能操作，缺少 AI Agent 中进行独立思考并行动的核心功能。
:::


## AI Agent 的组件

### 感知(Perception)

AI 代理感知是指人工智能  （AI） 代理从其环境中收集、解释和处理数据以做出明智决策的能力。这涉及使用传感器、数据输入或外部来源来了解其运行的系统的当前状态。
根据其用途和可用的传感器，AI 系统可以通过视觉、声音、文本、环境因素和预测分析来感知世界。

#### Agent 感知的工作原理

1. 感官输入收集：AI 代理从各种来源收集原始数据，例如摄像头（用于视觉）、麦克风（用于声音）、LiDAR 和雷达（用于空间感知）以及压力或温度传感器（用于环境传感）。
2. 数据处理和特征提取：收集数据时，将进行预处理以消除噪声并突出显示重要特征。例如，在计算机视觉中， 卷积神经网络  （CNN） 分析图像以  检测物体 、面部或运动。在语音识别中，深度学习模型将音频波转换为文本。
3. 模式识别和解释AI 使用机器学习算法检测模式、关系和上下文线索。NLP 模型（如 transformers）帮助 AI 理解和生成人类语言，而  强化学习  则允许机器人动态感知和适应周围环境。
4. 决策和响应：AI 代理使用推理模型来决定如何根据感知数据做出反应。例如，自动驾驶汽车可以识别行人和交通标志，然后进行实时驾驶调整；

模型反射型通过维护环境的内部模型来改进简单的反射代理。它们通过传感器感知环境，但也使用内部状态来跟踪环境随时间的变化

### 推理(Reasoning)

代理推理是处理决策的 AI 代理的一个组件 。它允许人工智能代理通过应用条件逻辑或启发式方法自主执行任务，依靠感知和记忆，使其能够追求目标并优化以获得最佳结果。
“推理引擎” 为代理工作流的规划和工具调用阶段提供支持。规划将任务分解为更易于管理的推理，而工具调用有助于通过可用工具为 AI 代理提供决策信息。这些工具可以包括应用程序编程接口 （API）、 外部数据集和数据源，例如  知识图谱 。

#### 代理推理策略

根据代理的架构和类型，可以以不同的方式进行代理推理。以下是 AI 代理推理的一些常见技术，包括每种技术的优缺点：

1. 条件逻辑（Conditional logic）：基于条件判断实现的推理控制
   - 优点：特别适用于特定于领域的使用案例
   - 缺点：遇到无法识别的场景时无法采取相应的行动
2. 启发式（Heuristics）：求解问题的最优解
   - 优点：能针对目标明确的场景进行快速响应，并推荐最优值
   - 缺点：无法处理未知场景
3. 反应式（ReAct (Reason + Act)）：通过思考-行动-观察循环逐步解决问题和迭代增强响应
   - 优点：在自然语言处理上具有可追溯性，整个过程透明度高
   - 缺点：可能重复生成相同的推理和行为，这可能导致无限循环
4. 无观察推理（ReWOO (Reasoning WithOut Observation)）：通过规划-实现-求解来实现任务的拆解完成和结论分析。
   - 优点：处理自然语言效率高
   - 缺点：添加额外的工具会降低 ReWOO 的性能，并且在环境上下文有限的情况下效果不佳
5. 自我反省（Self-reflection）：通过自我反省作为评估和改进其推理能力的一部分
   - 优点：擅长处理复杂任务
   - 缺点：更消耗资源和时间
6. 多智能体推理（Multiagent reasoning）：多代理系统由多个 AI 代理组成，它们协同工作以解决复杂问题
   - 优点：能处理多个不同问题，并且针对复杂任务处理更有优势
   - 缺点：受限于核心Agent对于问题的分发和整合效率

### 记忆(Memory)

AI 代理记忆是指人工智能  （AI） 系统存储和回忆过去经验以改善决策、感知和整体绩效的能力。

#### 记忆的类型

##### Short-term memory  短期记忆

短期记忆 （STM） 使 AI 代理能够记住最近的输入，以便立即做出决策。这种类型的内存在对话式 AI 中非常有用，因为对话式 AI 需要在多个交换中维护上下文。

STM 通常使用滚动缓冲区或上下文窗口实现，该窗口在被覆盖之前保存有限数量的最近数据。虽然这种方法提高了短期交互的连续性，但它不会保留会话之外的信息，因此不适合长期的个性化或学习。

##### Long-term memory  长期记忆

长期记忆 （LTM） 允许 AI 代理在不同会话中存储和调用信息，随着时间的推移使其更加个性化和智能。

与短期内存不同，LTM 专为永久存储而设计，通常使用数据库、 知识图谱或向量嵌入来实现。这种类型的内存对于需要历史知识的 AI 应用程序至关重要，例如个性化助手和推荐系统。

实施 LTM 的最有效技术之一是检索增强生成 （RAG），其中代理从存储的知识库中获取相关信息以增强其响应。

###### 长期记忆的类型

1. Episodic memory  情景记忆

情景记忆允许 AI 代理回忆特定的过去经历，类似于人类记住单个事件的方式。这种类型的内存对于基于大小写的推理非常有用，其中 AI 从过去的事件中学习以在未来做出更好的决策。
情景记忆通常是通过以结构化格式记录关键事件、动作及其结果来实现的，代理在做出决策时可以访问该格式。

2. Semantic memory  语义记忆：

语义内存负责存储结构化的事实知识，AI 代理可以检索这些知识并将其用于推理。与处理特定事件的情景记忆不同，语义记忆包含广义信息，例如事实、定义和规则。
AI 代理通常使用知识库、符号 AI 或向量嵌入来实现语义内存，使它们能够有效地处理和检索相关信息。这种类型的内存用于需要领域专业知识的实际应用程序，例如法律 AI 助理、医疗诊断工具和企业知识管理系统。

3. Procedural memory  程序记忆

AI 代理中的程序记忆是指存储和调用技能、规则和学习行为的能力，这些技能、规则和学习行为使代理能够自动执行任务，而无需每次都进行明确的推理。
它的灵感来自人类程序记忆，它允许人们执行骑自行车或打字等动作，而无需有意识地思考每个步骤。在 AI 中，程序记忆通过根据先前的经验自动执行复杂的动作序列来帮助代理提高效率。

### 规划(Planning)

AI 代理规划是指人工智能 （AI） 代理确定实现特定目标的一系列行动的过程。它涉及决策、目标优先级排序和行动排序，通常使用各种规划算法和框架。

#### AI 代理规划的工作原理

![AI 代理规划的工作原理.svg](assets/AI%20%E4%BB%A3%E7%90%86%E8%A7%84%E5%88%92%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.svg)

## AI 代理规划的步骤

1. **目标定义**
   * 明确代理的最终目标，这是代理决策过程的指导原则。
   * 目标可以是静态的（在整个规划过程中保持不变）或动态的（根据环境条件或用户交互进行调整）。
   * 例如，自动驾驶汽车的目标是在遵守安全法规的同时高效到达特定目的地。
   * 如果目标很复杂，代理会将其分解为较小的子目标，称为任务分解，以便以层次化的方式处理任务。

2. **任务分解**
   * 将高级目标分解为更小、更易于管理的子任务。
   * 例如，计划旅行可以分解为预订航班、查找酒店和规划行程等子任务。
   * LLM 在此过程中起着关键作用，通过自然语言处理将高级目标分解为子任务。

3. **状态表示**
   * 对代理的环境进行建模，包括当前条件、约束和背景因素，以便代理能够有效规划。
   * 通过感知实时了解环境，并结合训练数据或先前交互的数据集以及用户输入和自身内部状态数据。
   * 状态表示的复杂程度因任务而异，如国际象棋游戏中的棋子位置或机器人导航系统中的空间坐标、障碍物和地形条件。
   * 状态表示的准确性直接影响代理做出明智决策的能力。

4. **作排序**
   * 确定一系列作，将代理从当前状态转换为目标状态，构建逻辑且高效的步骤序列。
   * 识别潜在的动作，筛选出最佳的动作，确定它们的优先级，并考虑作之间的依赖关系和条件步骤。
   * 例如，机器人吸尘器需要确定清洁房间的最有效路径，避免不必要的重复。
   * ReAct 框架是一种用于处理动态决策的方法，其中推理涉及代理确定实现目标所需的动作或策略。

5. **优化和评估**
   * 在有多个选项可用时，选择实现目标的最佳路径。
   * 方法包括启发式搜索（通过启发式函数估计最佳路径）、强化学习（通过反复试验学习最佳作序列）和概率规划（考虑不确定性以选择具有最高预期效用的行动）。
   * 例如，仓库机器人需要确定最短和最安全的路线以检索物品，避免碰撞并缩短作时间。

6. **协作（多代理系统）**
   * 在多代理系统中，代理需要协同工作以实现个人或集体目标。
   * 多代理系统的规划过程比单代理更复杂，代理需要考虑其他代理的动作以及它们的决策如何相互作用。
   * 代理可以通过显式消息传递、共享任务定义或隐式协调来沟通和对齐目标。
   * 多代理系统中的规划可以是集中的（由单个实体或控制器生成整个系统的计划）或去中心化的（代理生成自己的计划，但协同工作以确保它们彼此一致并有助于全球目标）。

### 工具调用(Tool calling)

工具调用是指人工智能 （AI） 模型与外部工具、 应用程序编程接口  （API） 或系统交互以增强其功能的能力。MCP 能够得到大面积普及正是基于大模型对于工具调用能力的增强才能得以推广。

![工具调用原理步骤图.svg](assets/%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86%E6%AD%A5%E9%AA%A4%E5%9B%BE.svg)

1. 需求识别：AI模型借助自然语言理解能力，精准识别用户需求。当用户询问实时信息或提出复杂请求时，模型能迅速判断自身知识的局限性，并触发工具调用流程。例如，面对“现在旧金山的天气怎么样？”这样的问题，模型会意识到需要调用外部天气数据库。
2. 工具选择：模型从工具库中筛选出适配工具，通过分析工具的元数据（包括工具名称、功能描述、输入输出参数等），确保所选工具能精准满足需求。这一过程不仅关乎工具的功能适配，更涉及到输入参数的精准构建。
3. 构建与发送查询：在选定工具后，模型依据工具的API文档，构造符合规范的请求。这包括生成正确的请求URL、选择合适的请求方法，以及按照指定格式填充请求参数。例如，调用天气API时，模型会构建包含地理位置、时间戳等关键信息的请求。
4. 接收与处理响应：外部工具返回数据后，模型对响应数据进行解析。它会提取关键信息，去除冗余数据，并按照用户需求重新组织内容。对于天气数据，模型会提取温度、湿度、风速等核心信息，构造易于理解的回复。
5. 呈现信息或行动确认：模型以直观、简洁的方式将处理后的信息呈现给用户。如果请求涉及自动化操作，如设置提醒，模型会进一步确认操作的执行状态。
6. 搜索优化：在多轮交互中，模型会根据用户的反馈不断优化其工具调用策略。当用户请求更多信息或修改要求时，模型会调整查询参数，重新执行工具调用，以完善输出结果。

#### 代理工作流（Agentic Workflows）

代理工作流是 AI 驱动的流程，自主 AI 代理可在最少人工干预下做出决策、采取行动和协调任务。这些工作流利用智能代理的核心组件，例如推理、规划和工具使用，来高效执行复杂任务。与遵循预定义规则的传统自动化（如 RPA）不同，代理工作流更动态灵活，能适应实时数据和意外情况。AI 代理工作流以多步骤、迭代的方式处理复杂问题，可分解业务流程，动态调整并随时间优化其操作。

![代理工作流调用工具流程图.svg](assets/%E4%BB%A3%E7%90%86%E5%B7%A5%E4%BD%9C%E6%B5%81%E8%B0%83%E7%94%A8%E5%B7%A5%E5%85%B7%E6%B5%81%E7%A8%8B%E5%9B%BE.svg)

1. 理解问题：
AI 代理收集详细信息，并提出澄清问题（如“其他设备是否连接到网络？”）。这有助于全面了解问题背景和具体情况。
2. 执行诊断步骤：
根据用户的回答，AI 代理选择并运行不同的问题解决步骤。这可能包括 ping 路由器、检查网络日志等技术操作。
3. 自适应工具使用：
AI 代理根据诊断情况调用不同的工具。例如，检测到服务器端问题时调用监控工具 API；设备特定问题时检索驱动更新或运行重置脚本。
4. 根据结果迭代：
动态调整解决策略，如交叉检查相关问题、重新诊断，而非立即升级。如果某个步骤未解决问题，AI 会尝试不同的方法。
5. 最终确定和学习：
问题解决后，记录解决方案以供将来使用。如果未解决，则将详细报告上报，并总结尝试过的修复步骤。
6. 利用多智能体协作：
通过多智能体系统，每个代理都有专门的工具和专业领域，它们共享信息，避免重复学习，提高问题解决效率。
7. 进行数据整合：
代理工作流与现有基础设施集成。这包括数据整合到中央数据库，以及使用代理编排框架如 LangChain、LangGraph 等，提高规模和性能。
8. 提示工程应用：
依赖提示工程优化性能，运用思维链、自我反思等技术，帮助 AI 模型理解并响应各种查询。


### 学习(Learning)

AI 代理学习是指人工智能 （AI） 代理通过与环境交互、处理数据和优化决策来随着时间的推移提高其性能的过程。此学习过程使自主代理能够在动态环境中适应、提高效率并处理复杂任务。

![代理学习流程图.svg](assets/%E4%BB%A3%E7%90%86%E5%AD%A6%E4%B9%A0%E6%B5%81%E7%A8%8B%E5%9B%BE.svg)

1. 环境交互与感知
   - 目标驱动：基于人类定义的目标（如 “规划旅行”）或动态任务（如 “故障排查”），通过自然语言理解或传感器获取环境信息。
   - 知识补充：若内置知识库不足，调用工具（如 API、搜索引擎）获取实时数据（如天气、库存），或通过多代理协作获取专业领域知识（如冲浪天气条件）。
2. 决策与动作执行
   - 任务分解：通过 LLM 将复杂目标拆分为子任务（如 “查航班→订酒店→规划行程”），并生成动作序列。
   - 策略选择：结合当前状态（如用户偏好、资源约束）和历史经验，选择最优动作（如优先调用低价机票 API）。
   - 工具调用：执行工具或函数（如调用地图 API 计算路线），并记录动作结果（如 “航班已预订”）。
3. 反馈评估与学习
   - 结果反馈：
      - 外部反馈：环境返回执行结果（如 “航班取消”）或用户评价（如 “行程太紧凑”）。
      - 内部评估：批评者组件通过奖励函数（如任务完成度）或损失函数（如预测误差）评估动作有效性。
   - 知识更新：
     - 学习元素：根据反馈调整知识库，例如存储新解决方案（如 “航班取消时改乘高铁”）或优化策略参数（如优先选择可退改航班）。
     - 持续学习：通过增量训练或迁移学习适应新数据，避免 “灾难性遗忘”。
4. 迭代优化与探索
   - 策略 refinement：问题生成器主动探索新动作（如尝试未使用过的工具），通过试错发现更优解（如使用 RAG 技术整合多源数据）。
   - 多代理协作：在复杂场景中，代理间共享知识（如医疗代理协作诊断）或竞争优化（如金融交易策略博弈），提升整体效率。
   - 人机协同（HITL）：人工介入修正偏差（如审核敏感内容），强化学习方向。
   
**核心机制总结**：
   1. 闭环学习：通过 “感知→决策→执行→反馈→优化” 循环，持续提升任务完成效率。
   2. 多模态学习：结合监督学习（标记数据）、强化学习（奖励信号）、自监督学习（数据自生成标签）等技术，适应不同场景。
   3. 动态适应：利用实时数据和工具调用突破静态知识库限制，在变化环境中（如实时交通、用户偏好变更）灵活调整策略。

## AI Agent 的应用和未来

1. AI 研究代理
   - 简化数据分析、趋势发现和假设生成。
   - 用于学术和专业领域，如 ChatGPT 帮助收集信息、构建思路。
   - 有时称为 “代理 RAG”，可访问多个知识库。
2. 客户服务代理
   - 提供全天候支持，处理查询和故障排除。
   - 个性化互动，减少等待时间，使人工代理专注于复杂任务。
3. 营销和销售代理
   - 通过分析客户数据优化营销活动和销售流程。
   - 个性化推广和自动执行重复性任务，如潜在客户资格认证和邮件跟进。
4. 代码协助代理
   - 帮助开发者提供建议代码、调试错误、解决票证/问题。
   - 甚至构建新功能，节省开发时间，使他们专注于创造性解决问题。

## REF

1. [What Are Agentic Workflows?](https://weaviate.io/blog/what-are-agentic-workflows)
2. [The 2025 Guide to AI Agents](https://www.ibm.com/think/ai-agents)
3. [What is an AI agent?](https://www.mckinsey.com/featured-insights/mckinsey-explainers/what-is-an-ai-agent#/)
4. [万字长文解析 AI Agent 技术原理和应用](https://xie.infoq.cn/article/b31ea85ab23da511c54a98317)
5. [读懂AI Agent：基于大模型的人工智能代理](https://zhuanlan.zhihu.com/p/657937696)
6. [A Visual Guide to LLM Agents](https://newsletter.maartengrootendorst.com/p/a-visual-guide-to-llm-agents)
7. [图解 LLM Agent——从基础到高级概念](https://mp.weixin.qq.com/s/QFJyS0TUCv-TT39isRLu3w)
